---
created: 2023-01-06
updated: 2023-01-06
status: 🟩
type: issue
---

### Metadata
- Tags:: #✅/🟩 
- Topics:: [[自訂查詢]]

# 議題
- 來源: [[@George]]
- URL:: http://localhost:2016/SDM/EnquiryIdleCustomer#/
- 工作項目: https://dev.azure.com/KhhDev/nextERP/_workitems/edit/3455
- 問題: 欄位是int，繫結代碼字串，例如: 180 mapping "180"，在查詢時沒問題，再重新進入，選項會變空白。
```ad-info
select * from syscode
where ckind = 'Q_DEBTOR_ENQUIRY_IDLE_DAYS'
order by ORDERNUM
```

# 原因
- George的CodeFilter使用到CodeName。
# 解決方式
- 改成CodeNo即可。![upgit_20230106_1672975123.png](https://raw.githubusercontent.com/kimx/ObsidianAssets/master/2023/01/upgit_20230106_1672975123.png)

# 待辨工作

# 記錄
- 這個議題有個很有趣的點，本來George設定錯誤，照理說連查詢都會查不到才對! 但是由於底層Directive sg-convert-to-number，有處理過字串與數值相同選項，在parse to model時，"180 Days" 轉成了 180 ，剛好可以查詢。
```ad-info
title: "180 Days" 轉成了 180 

   ngModel.$parsers.push(function (viewValue) {
                            if (ngModel.$isEmpty(viewValue)) {
                                return null;
                            }
                            return parseInt(viewValue);
                        });
```
# 其他/參考